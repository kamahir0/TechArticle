# 序論
どうも！ AM3・クライアントエンジニアの平塚です。

時に、

皆さんのプロジェクトでは **デバッグ機能** どうされてますでしょうか？<br>
配属2カ月ちょいの新卒エンジニアは他PJの開発事情など当然のように知らないのですが、<br>
AM3ではこれまで**SRDebugger**というアセットでデバッグ機能を管理してきました。

アイテム付与やストーリー解放といったデバッグコマンドへのアクセスを提供する他、コンソールやプロファイラを実機でも確認可能にするなど、とっても便利な代物です。

しかし...やがてSRDebuggerに対して、ある不満がチーム内で浮かび上がってきました。<br>
それは **「デバッグコマンドが増えすぎてすごく見づらい！」** というものです。

![SRDebugger](https://raw.githubusercontent.com/kamahir0/TechArticle/master/UnityDebugSheetStart/IMG_7799.PNG)
ﾐﾁｨ...

ここまで多すぎると目当てのデバッグコマンドを見つけるのも一苦労ですね。
そこで、今回導入することになったのが**UnityDebugSheet**です。

![UnityDebugSheet](https://raw.githubusercontent.com/kamahir0/TechArticle/master/UnityDebugSheetStart/IMG_7800.PNG)

UnityDebugSheetはデバッグコマンドへのアクセスを階層式に格納するシステムを提供します。目当てのコマンドが見つけやすくなるので開発効率アップが期待できます。

今回の記事は、そんなUnityDebugSheetを新卒エンジニアが導入してみた！というお話です。

# 2つの概念
UnityDebugSheetを使う上で知っておくべき「セル」「ページ」という2つの概念があります。簡単にご説明しましょう。

## セル
デバッグシート上に配置される**ボタン**、**スイッチ**、**スライダー**といった各要素です。<br>
ボタンを押すことで何らかの処理を呼び出したり、スイッチやスライダーならbool・floatなどの値をここから取得することも可能です。また、完全オリジナルのセルを作ることもできます。
![cell](https://raw.githubusercontent.com/kamahir0/TechArticle/master/UnityDebugSheetStart/IMG_3791.PNG)

## ページ
セルの集合体であり、デバッグシートの階層の単位であり、常に1つ表示されています。
上述の「セル」の中には**ページリンクボタン**というボタンが用意されており、これを押すことでページから別のページへと進むことができます。<br>
また、デバッグシートの最も根本の階層部にあたるページは特別に**ルートページ**と呼ばれます。
![page](https://raw.githubusercontent.com/kamahir0/TechArticle/master/UnityDebugSheetStart/IMG_3790.PNG)

# 良い点・悪い点
## 良い点
### アクセスしやすいデザイン
序論でも述べていますが、お目当ての機能にアクセスしやすいです。
SRDebuggerは精々ボタンをやんわりグループ分けする程度しかできませんでしたが、UnityDebugSheetは階層式なので同じ画面中に並ぶボタンを絞れます。ﾐﾁｨ...なんて擬音とはオサラバです。
またデバッグシートのセルには標準で、アイコンやサブテキストを付加する機能が用意されています。
![Icon&SubText Ex](リンク)
アイコンで分かりやすくできるのは勿論、サブテキストが意外に偉いです。
サブテキストに簡単な説明を併記しておくだけで、初見のデバッグコマンドの機能やページリンクボタンのリンク先ページの特色が、それを使わずとも推測できるようになります。
「『それを使うとどうなるか』が使うまでもなく分かる」ことは使い勝手を大きく左右します。

### ポップアップいらず
UnityDebugSheetにおいては、各ページクラスの'Initialize'関数内に'Add〇〇'という関数の呼び出しを書くことで、ページにセルが配置されることとなります。ここで、このAdd系関数はすべてint型のidを返します。
ページクラスには`GetCell`関数なるものが用意されており、上述のidを使うことでセルの参照を得られる仕組みになっています。
これが非常に強力で、ボタンにより実行する処理で動的にセルの状態を変化させたりすることを可能にします。

例1　3D解像度を変化させるSliderセルと、それをリセットするButtonセル

例2　増築デバッグコマンドにおいてInputFieldセルでIDを入力すると、Labelセルを更新してパーツ名を表示

こういった凝ったデバッグ機能は従来であれば、専用ポップアップを作ってSRDebuggerにポップアップ呼び出しボタンを追加するような実装をしていたはずです。
しかしUnityDebugSheetなら、ページクラス範囲内のコーディングだけで同等のものが作れます。AM3にも一応コーディングだけで作れる`DefaultPopup`なるものは存在しますが、自由度はデバッグシートに軍配が上がります。

## 悪い点
### リンクページボタンがオブジェクト指向的じゃない

### 状態を持てない

### 一覧性ではSRDebuggerが勝る

# 導入にあたり行った工夫
